<?xml version="1.0" encoding="utf-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="CustomPriceList" owl="1" >
        <div class="pricelist-wrapper">
            <div class="tabs-wrapper"> 
                <ul id="scroller" class="nav nav-pills">
                    <li t-att-class="state.tab == 'quoted'?'active':''">
                        <button t-on-click="()=>state.tab ='quoted'">Quoted</button>
                    </li>
                    <li t-att-class="state.tab == 'pending_quoted'?'active':''">
                        <button t-on-click="()=>state.tab ='pending_quoted'">Pending Quote</button>
                    </li> 
                </ul>  
            </div>
            <div class="tab-content"> 
                <div id="quoted" t-if="state.tab == 'quoted'">
                    <div class="price-list-container">
                        <div class="row m-auto my-3">
                            <div class="col-12 col-md-4">
                                <input type="text" class="form-control btn-filter"  placeholder="Search for product" t-on-input="onSearchq"/>
                            </div>
                            <div class="col-12 col-md-8 d-flex justify-content-end align-items-center"> 
                                <select class="form-control btn-filter static-width" t-on-change="(ev)=>this.OnChangeSfilter(ev)">
                                    <option value="all" t-att-selected="this.state.sfilter == 'all'">All Products</option>
                                    <option value="in_stock" t-att-selected="this.state.sfilter == 'in_stock'">In Stock</option>
                                </select>
                                <div class="dropdown o_no_autohide_item">
                                    <a href="#" role="button" data-bs-toggle="dropdown" class="dropdown-toggle active btn bordered btn-filter" aria-expanded="false">
                                        <i class="fa fa-sliders pe-1"></i>
                                        <span class="">Filter</span> 
                                    </a>
                                    <div role="menu" class="dropdown-menu js_usermenu dropdown-menu-end" style="">
                                        <div class="row m-auto">
                                            <div class="col-12"><span><strong>Filters</strong></span></div>
                                            <hr class="my-1"/>
                                            <div class="col-12"><span class="text-500">Category</span></div> 
                                            <div class="col-6 d-flex justify-content-between py-1 form-check px-3" t-foreach="state.categories" t-as="categ" t-key="categ_index">
                                                <lable><t t-esc="categ.name"/></lable>
                                                <input type="checkbox" name="categ_filte" class="s_website_form_input form-check-input" t-att-checked="state.active_categs.includes(categ.id)" t-on-change="(ev)=>this.onChangeFilter(ev,categ.id)"></input>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> 
                        <table class="table table-bordered">
                            <thead class="table-light">
                                <tr>
                                    <th colspan="2">Name</th>  
                                    <th>Price (Per Unit)</th>
                                    <th>Availability</th>
                                    <th>Add to Cart</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="state.quoted" t-as="p" t-key="p.id">
                                    <tr>
                                        <td colspan="2"><a class="btn btn-link p-0 text-start text-decoration-none" t-att-href="p.url"><t t-esc="p.name"/></a></td>
                                        <td><t t-esc="state.currency"/><t t-esc="p.price"/></td>
                                        <td><t t-esc="p.in_stock"/></td>
                                        <td class="d-flex justify-content-between border-0">
                                            <div t-attf-class="css_quantity input-group align-middle" contenteditable="false">
                                                <a t-on-click="(ev)=>this.clickMin(ev)" t-attf-href="#" class="btn btn-link js_add_cart_json" aria-label="Remove one" title="Remove one">
                                                    <i class="fa fa-minus"/>
                                                </a>
                                                <input type="text" class="form-control quantity text-center" data-min="1" name="add_qty" t-att-value="1"/>
                                                <a t-on-click="(ev)=>this.clickPlus(ev)" t-attf-href="#" class="btn btn-link float_left js_add_cart_json" aria-label="Add one" title="Add one">
                                                    <i class="fa fa-plus"/>
                                                </a>
                                            </div>
                                            <button class="btn btn-light" t-on-click="(el)=>this.clickCart(el)" t-att-data-pid="p.id">Add</button>
                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                        <div class="products_pager justify-content-center d-flex gap-2 mt-3 px-4 pb-3"> 
                            <t t-set="qpager" t-value="state.q_get_pager"/>  
                            <ul class="list-unstyled pagination" t-if="qpager.page_count &gt; 1">
                                <li t-attf-class="page-item #{qpager.page.num == 1?'disabled':''}">
                                    <a class="btn page-link" t-on-click="()=>this.goToPageq(qpager.page_previous.num)">
                                        <span class="fa fa-chevron-left" role="img" aria-label="Previous" title="Previous"/>
                                    </a>
                                </li>
                                <t t-foreach="qpager.pages" t-as="page" t-key="page_index">
                                    <li t-attf-class="page-item ">
                                        <a t-attf-class="btn page-link #{page.num == qpager.page.num?'active':''}" t-out="page.num" t-on-click="()=>this.goToPageq(page.num)"/>
                                    </li>
                                </t>
                                <li t-attf-class="page-item #{qpager.page.num == qpager.page_count?'disabled':''}">
                                    <a t-attf-class="btn page-link" t-on-click="()=>this.goToPageq(qpager.page_next.num)">
                                        <span class="fa fa-chevron-right" role="img" aria-label="Next" title="Next"/>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div id="pendingquoted" t-if="state.tab == 'pending_quoted'">
                    <div class="price-list-container">
                        <div class="row m-auto my-3">
                            <div class="col-12 col-md-4">
                                <input type="text" class="form-control btn-filter"  placeholder="Search for product" t-on-input="onSearchp"/>
                            </div>
                            <div class="col-12 col-md-8 d-flex justify-content-end align-items-center"> 
                                <select class="form-control btn-filter static-width" t-on-change="(ev)=>this.OnChangeSfilter(ev)">
                                    <option value="all" t-att-selected="this.state.sfilter == 'all'">All Products</option>
                                    <option value="in_stock" t-att-selected="this.state.sfilter == 'in_stock'">In Stock</option>
                                </select>
                                <div class="dropdown o_no_autohide_item">
                                    <a href="#" role="button" data-bs-toggle="dropdown" class="dropdown-toggle active btn bordered btn-filter" aria-expanded="false">
                                        <i class="fa fa-sliders pe-1"></i>
                                        <span class="">Filters</span> 
                                    </a>
                                    <div role="menu" class="dropdown-menu js_usermenu dropdown-menu-end" style="">
                                        <div class="row m-auto">
                                            <div class="col-12"><span><strong>Filters</strong></span></div>
                                            <hr/>
                                            <div class="col-12"><span class="text-500">Category</span></div> 
                                            <div class="col-6 d-flex justify-content-between py-1 form-check px-3" t-foreach="state.categories" t-as="categ" t-key="categ_index">
                                                <lable><t t-esc="categ.name"/></lable>
                                                <input type="checkbox" name="categ_filte" class="s_website_form_input form-check-input" t-att-data-categid="categ.id" t-on-change="(ev)=>this.onChangeFilter(ev,categ.id)" t-att-checked="state.active_categs.includes(categ.id)"></input>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div> 
                        </div>
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th colspan="2">Name</th>
                                    <th>Price (Per Unit)</th>
                                    <th>Availability</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="state.pending_quote" t-as="p" t-key="p.id">
                                    <tr>
                                        <td colspan="2"><a class="btn btn-link p-0 text-start text-decoration-none" t-att-href="p.url"><t t-esc="p.name"/></a></td>
                                        <td>Pending</td>
                                        <td><t t-esc="p.in_stock"/></td> 
                                    </tr>
                                </t>
                            </tbody>
                        </table>

                        <div class="products_pager justify-content-center d-flex gap-2 mt-3 px-4 pb-3"> 
                            <t t-set="ppager" t-value="state.p_get_pager"/>  
                            <ul class="list-unstyled pagination" t-if="ppager.page_count &gt; 1">
                                <li t-attf-class="page-item #{ppager.page.num == 1?'disabled':''}">
                                    <a class="btn page-link" t-on-click="()=>this.goToPagep(ppager.page_previous.num)">
                                        <span class="fa fa-chevron-left" role="img" aria-label="Previous" title="Previous"/>
                                    </a>
                                </li>
                                <t t-foreach="ppager.pages" t-as="page" t-key="page_index">
                                    <li t-attf-class="page-item ">
                                        <a t-attf-class="btn page-link #{page.num == ppager.page.num?'active':''}" t-out="page.num" t-on-click="()=>this.goToPagep(page.num)"/>
                                    </li>
                                </t>
                                <li t-attf-class="page-item #{ppager.page.num == ppager.page_count?'disabled':''}">
                                    <a t-attf-class="btn page-link" t-on-click="()=>this.goToPagep(ppager.page_next.num)">
                                        <span class="fa fa-chevron-right" role="img" aria-label="Next" title="Next"/>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div> 
            </div>
        </div> 
    </t>
</templates>
 