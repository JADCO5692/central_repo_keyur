<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="boxesofhouston_products_item" name="Product Item">
        <form action="/shop/cart/update" method="post" class="oe_product_cart cart-custom h-100 d-flex w-100 pb-0"
            t-att-data-publish="product.website_published and 'on' or 'off'"
            itemscope="itemscope" itemtype="http://schema.org/Product">
            <t t-set="product_href" t-value="keep(product.website_url, page=(pager['page']['num'] if pager['page']['num']&gt;1 else None)) + selected_attributes_hash" />
            <t t-set="image_type" t-value="product._get_suitable_image_size(ppr, td_product['x'], td_product['y'])"/>
            <t t-set="template_price_vals" t-value="get_product_prices(product)"/>
            <div class="row prod-main-row m-auto w-100 align-items-center">
                <div class="prod-main-col col-12 col-md-4 col-lg-4 align-items-center d-flex">
                    <h6 class="o_wsale_products_item_title mb-0 text-break">
                        <a class="text-primary text-decoration-none text-primary-emphasis" itemprop="name" t-att-href="product_href" t-att-content="product.name" t-field="product.name" />
                        <a t-if="not product.website_published" role="button" t-att-href="product_href" class="btn btn-sm btn-danger" title="This product is unpublished.">
                            Unpublished
                        </a>
                    </h6>
                </div>
                <t t-if="not request.env.user._is_public() or (request.env.user._is_public() and not request.env['ir.config_parameter'].sudo().get_param('website_hide_button.hide_price'))" >
                    <t t-set="pricelist_product" t-value="product._is_pricelist_item()"/>
                    <div class="prod-main-col col-12 col-md-4 col-lg-4 d-flex justify-content-between align-items-center"> 
                        <div t-if="pricelist_product" class="product_price" itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/Offer">
                            <span class="h6 mb-0" t-if="template_price_vals['price_reduce'] or not website.prevent_zero_price_sale"
                                t-out="template_price_vals['price_reduce']"
                                t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                            <span class="h6 mb-0" t-elif="any(ptav.price_extra for ptav in product.attribute_line_ids.product_template_value_ids)">&amp;nbsp;</span>
                            <span class="h6 mb-0" t-else="" t-field="website.prevent_zero_price_sale_text"/>
                            <t t-if="'base_price' in template_price_vals and (template_price_vals['base_price'] &gt; template_price_vals['price_reduce']) and (template_price_vals['price_reduce'] or not website.prevent_zero_price_sale)">
                                <del t-attf-class="text-muted me-1 h6 mb-0" style="white-space: nowrap;">
                                    <em class="small" t-esc="template_price_vals['base_price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}" />
                                </del>
                            </t>
                            <span itemprop="price" style="display:none;" t-esc="template_price_vals['price_reduce']" />
                            <span itemprop="priceCurrency" style="display:none;" t-esc="website.currency_id.name" />
                        </div>  
                    </div>
                    
                    <div class="prod-main-col col-12 col-md-4 col-lg-4 d-flex justify-content-between align-items-center">
                        <div t-if="pricelist_product" t-attf-class="css_quantity input-group align-middle" contenteditable="false">
                            <a t-attf-href="#" class="btn btn-link js_add_cart_json" aria-label="Remove one" title="Remove one">
                                <i class="fa fa-minus"/>
                            </a>
                            <input type="text" class="form-control quantity text-center" data-min="1" name="add_qty" t-att-value="1"/>
                            <a t-attf-href="#" class="btn btn-link float_left js_add_cart_json" aria-label="Add one" title="Add one">
                                <i class="fa fa-plus"/>
                            </a>
                        </div>
                        <t t-set="product_variant_id" t-value="product._get_first_possible_variant_id()"/>
                        <div class="o_wsale_product_btn d-flex gap-2"> 
                            <input name="product_id" t-att-value="product_variant_id" type="hidden"/>
                            <input name="product_template_id" t-att-value="product.id" type="hidden"/>
                            <t t-if="product_variant_id and template_price_vals['price_reduce'] or not website.prevent_zero_price_sale">
                                <a t-if="pricelist_product and product._website_show_quick_add()" href="#" role="button" 
                                    class="btn btn-light a-submit" aria-label="Shopping cart" title="Shopping cart" >
                                    Add
                                </a>
                                <t t-if="not pricelist_product"> 
                                    <t t-if="product_variant_id in current_quote_ids">
                                        <a href="javascript:;" role="button" class="btn btn-primary a-quote" aria-label="Request A Quote" title="Added to Quote" >
                                            Added to Quote
                                        </a>
                                    </t>
                                    <t t-else="">
                                        <a href="#" role="button" class="btn btn-light o_quote_product_btn a-quote" aria-label="Request A Quote" title="Request A Quote" >
                                            Add To Quote
                                        </a>
                                    </t>
                                </t> 
                            </t>
                        </div>  
                    </div>
                </t>
                <div t-else="" class="col-12 col-md-8 col-lg-8 d-flex justify-content-center align-items-center">
                    <div class="alert alert-info mb-0 p-2">
                        <i class="fa fa-info-circle"/>
                        <span>Please Log in to see price and buy options.</span>
                    </div> 
                </div>
            </div>
        </form>
    </template>
</odoo>
