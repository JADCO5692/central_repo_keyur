<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="res_config_shipstation_form_view" model="ir.ui.view">
            <field name="name">Res Config Shipstation Form View</field>
            <field name="model">shipstation.instance.ept</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form create="false">
                    <sheet>
                        <group>
                            <group>
                                <field name="name"/>
                                <field name="shipstation_api_key" required="provider == 'shipstation_ept'"/>
                                <field name="provider" invisible="1"/>
                                <field name="company_id" options="{'no_create': True, 'no_create_edit' : True}"/>
                            </group>
                            <group>
                                <field name="shipstation_url" required="provider == 'shipstation_ept'" readonly="1"/>
                                <field name="shipstation_api_secret_key" password="True"
                                       required="provider == 'shipstation_ept'"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="res_config_action_shipstation_instance"
                model="ir.actions.act_window">
            <field name="name">Shipstation Instance</field>
            <field name="res_model">shipstation.instance.ept</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
            <field name="view_id" ref="shipstation_ept.res_config_shipstation_form_view"/>
        </record>

        <record id="view_shipstation_config_settings" model="ir.ui.view">
            <field name="name">Shipstation Settings</field>
            <field name="model">res.config.settings</field>
            <field name="priority" eval="100"/>
            <field name="inherit_id" ref="base.res_config_settings_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//form" position="inside">
                    <app data-string="Shipstation" string="Shipstation" name="shipstation_ept" groups="shipstation_ept.group_shipstation_manager">
                        <h2>Shipstation Instances</h2>
                        <div class="row mt16 o_settings_container">
                            <div class="col-12 col-lg-6 o_setting_box">
                                <div class="o_setting_right_pane">
                                    <label for="shipstation_instance_id" string="Select Instance"/>
                                    <field name="shipstation_instance_id" required="shipstation_instance_id"
                                           options="{'no_create': True, 'no_create_edit' : True}"/>
                                    <div class="text-muted">To choose Shipstation instance and configure more
                                        settings.
                                    </div>
                                    <button name="%(res_config_action_shipstation_instance)d" icon="fa-arrow-right"
                                            type="action" string="Create More Instance" class="oe_link"/>
                                </div>
                            </div>
                        </div>
                        <h2 invisible="not shipstation_instance_id">General Configuration</h2>
                        <div class="row mt16 o_settings_container" invisible="not shipstation_instance_id">
                            <div class="col-xs-12 col-md-6 o_setting_box">
                                <div class="o_setting_left_pane">
                                    <field name="use_same_tracking_link_for_all_shipping_provider"/>
                                </div>
                                <div class="o_setting_right_pane">
                                    <label for="use_same_tracking_link_for_all_shipping_provider"/>
                                    <div class="text-muted">Use same Tracking link(URL) to track the shipment for all
                                        Shipping Providers
                                        URL.
                                    </div>
                                </div>
                            </div>

                            <div class="col-xs-12 col-md-6 o_setting_box">
                                <div class="o_setting_right_pane">
                                    <label for="tracking_link"/>
                                    <field name="tracking_link"></field>
                                    <div class="text-muted">Tracking link(URL) useful to track the shipment from this
                                        URL.
                                    </div>
                                </div>
                            </div>

                            <div class="col-xs-12 col-md-6 o_setting_box">
                                <div class="o_setting_right_pane">
                                    <label for="shipstation_weight_uom"/>
                                    <field name="shipstation_weight_uom" required="not shipstation_instance_id"/>
                                    <div class="text-muted">Supported weight UoM by ShipStation &amp; it will use in
                                        weight conversion.
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-12 col-md-6 o_setting_box">
                                <div class="o_setting_right_pane">
                                    <label for="contents_of_international_shipment"/>
                                    <field name="contents_of_international_shipment"
                                           required="shipstation_instance_id"></field>
                                    <div class="text-muted">Contents of Internation shipment Options by ShipStation
                                        for use of International Label Print
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-12 col-md-6 o_setting_box">
                                <div class="o_setting_right_pane">
                                    <label for="non_delivery_option"/>
                                    <field name="non_delivery_option"
                                           required="shipstation_instance_id"></field>
                                    <div class="text-muted">Non-Delivery option by ShipStation
                                        for use of International Label Print
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 col-lg-6 o_setting_box" groups="base.group_no_one">
                                <div class="o_setting_left_pane">
                                    <field name="active_debug_mode"/>
                                </div>
                                <div class="o_setting_right_pane">
                                    <label for="active_debug_mode"/>
                                    <div class="text-muted">Print shipstation API request and response data in
                                        log.
                                    </div>
                                </div>
                            </div>

                            <div class="col-xs-24 col-md-10 o_setting_box">
                                <div class="o_setting_left_pane">
                                    <field name="is_shipping_label_package_wise"/>
                                </div>
                                <div class="o_setting_right_pane">
                                    <label for="is_shipping_label_package_wise"/>
                                    <div class="text-muted">It Will Use To Generate The Shipping Label Put In Pack Wise.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </app>
                </xpath>
            </field>
        </record>

        <menuitem id="shipstation_instance_menu_item" name="ShipStation"
                  groups="shipstation_ept.group_shipstation_user" sequence="20"/>

        <!-- Menu for Displaying shipstation icon in front -->
        <menuitem id="shipstation_instance_menu_item" name="ShipStation"
                  web_icon="shipstation_ept,static/description/icon.png"
                  groups="shipstation_ept.group_shipstation_user" sequence="21"/>

        <!-- Configuration menu of shipstation -->
        <menuitem id="menu_configuration_ept" parent="shipstation_instance_menu_item"
                  sequence="20" name="Configuration" groups="shipstation_ept.group_shipstation_manager"/>

        <record id="action_shipstation_configuration" model="ir.actions.act_window">
            <field name="name">Shipstation</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.config.settings</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="shipstation_ept.view_shipstation_config_settings"/>
            <field name="target">inline</field>
            <field name="context">{'module' : 'shipstation_ept'}</field>
        </record>

        <!-- Sub menu of Configuration main menu [Shipstation Settings] -->
        <menuitem
                id="menu_config_shipstation_setting"
                sequence="1"
                name="Settings"
                parent="shipstation_ept.menu_configuration_ept"
                action="action_shipstation_configuration"
                groups="base.group_system"/>


        <menuitem name="Shipstation Instance" id="menu_shipstation_instance"
                  parent="shipstation_ept.menu_configuration_ept"
                  action="shipstation_ept.action_shipstation_instance_id"
                  sequence="2"/>
    </data>
</odoo>
